: one-plus 1 + ;
4 [ one-plus one-plus ] call
4 \ one-plus execute
: keep swap dup >r swap call r> ;
: (factorial) dup 1 eq [ drop ] [ [ * ] keep 1 - (factorial) ] if ;
: factorial 1 swap (factorial) ;
5 factorial
\ (factorial) word-name [ 77 ] curry . newline
[ >r 5 . newline 987 34 2 r> continue 6 ] callcc 8
[ 1 2 3 ] [ 2 + ] map
: = two-dup eq [
        two-drop t
    ] [
        two-dup [ type-tag ] bi eq [
            dup list? [
                two-dup [ list-head ] bi
                = [ [ list-tail ] bi = ] [ two-drop f ] if
            ] [
                dup string? [ string= ] [ eq ] if
            ] if
        ] [
            two-drop f
        ] if
    ] if ;
[ ] [ ] =
1 2 =
[ 1 2 eq ] [ 1 2 eq ] =
[ eq 1 eq ] [ eq 1 = ] =
\ eq dup [ word-name ] bi =
\ eq \ dup [ word-name ] bi =
[ 1 [ 2 ] 3 ] [ 1 [ 2 ] 3 ] =

\ eq word-name string?
1 type-tag [ ] type-tag
[ bi ] list-head
\ bi word-definition
